\chapter{Output}
This chapter describes the output of the code.
The first section those that is common to both versions of the code, the
second those of the parallel version, and the last section will describe
the output of the quasilinear version.
For each file there is a subsection. The main groups of hdf5 files are
described in paragraphs.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Both}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Parallel version}

\subsection{amat\_after.dat}
\subsection{amat\_before.dat}

\subsection{bvec\_after.dat}
\subsection{bvec\_before.dat}
\subsection{bvec\_solution.dat}
\subsection{collop.h5}
\subsection{collpar.dat}

\subsection{efinal.h5}

\subsection{eta\_m.dat}
\subsection{eta\_ori.dat}
\subsection{eta\_p.dat}

\subsection{evolve.h5}

\subsection{fin\_dims.dat}
\subsection{fin\_flux\_m.dat}
\subsection{fin\_flux\_p.dat}

\subsection{fin\_source\_m.dat}
\subsection{fin\_source\_p.dat}

\subsection{fulltransp.h5}
This contains the input parameters ``lag'' and ``leg'', which is a point
to remember when comparing files of different runs (especially
convergence tests/scans).

\paragraph{k_cof}
Related to a integration constant in the expression for the parallel
flow. For definition see below Eq. (2.26) in \cite{Martitsch:Thesis:16}.

\subsection{magnetics.h5}
\paragraph{device}
\paragraph{fieldline}
\paragraph{fieldperiod}
\paragraph{fieldpropagator}
\paragraph{fieldripple}
\paragraph{general}
\paragraph{surface}

\subsection{MatrixD\_mmp-gee.dat}
\subsection{MatrixI\_mmp-gee.dat}
\subsection{MatrixNu\_mmp-gee.dat}
\subsection{MatrixNu\_mmp-ginf.dat}

\subsection{neo2\_config.h5}
Contains the settings (from neo2.in) of the run, as well as the hash of
the git version from which the code was build. To support this, also
some of the cmake build variables are included.
This means some of the fields (the /metadata group) should be
excluded when comparing different runs.

The namelists are recreated as groups.

\subsection{phi\_placement\_problem.dat}

\subsection{qfmin1.dat}
\subsection{qfmin2.dat}
\subsection{qfmin3.dat}
\subsection{qfplu1.dat}
\subsection{qfplu2.dat}
\subsection{qfplu3.dat}

\subsection{SourceAa123m\_Cm.dat}

\subsection{taginfo.h5}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Quasilinear version}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{collop.h5}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{eta\_ori.dat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{evolve.dat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{*.sp.chk.dat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{*.sp.cur.dat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{*.sp.dat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{*.sp.log.dat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{MatrixD\_mmp-gee.dat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{MatrixI\_mmp-gee.dat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{MatrixNu\_mmp-gee.dat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{MatrixNu\_mmp-ginf.dat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{neo2\_config.h5}
Note that this file is not written in the multispecies case.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{precom\_collop.h5}

\paragraph{Amm}

\paragraph{C\_m}

\paragraph{M\_transform\_}

\paragraph{M\_transform\_inv}

\paragraph{ailmm\_aa}

\paragraph{anumm\_aa}

\paragraph{asource}

\paragraph{denmm\_aa}

\paragraph{meta}
Here the values of some of the input variables are documented.

\paragraph{version}

\paragraph{weightden}

\paragraph{weightdenerg}

\paragraph{weightlag}

\paragraph{weightparflow}

\paragraph{x1mm}

\paragraph{x2mm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{How to read/edit the in/output}
This section will briefly describe the possibilities to read and edit
the input and output of \neo2.

In table~\ref{tablereadinginoutput} is an overview of the formats used
for input and output, along with usual ending and the possibilities to
edit these with other programs.

\begin{table}
  \begin{center}
    \begin{tabular}{cccccc}
kind of in-/output & in/out & matlab & octave & python3 & texteditor \\
data (text, dat)   & out    & yes    & yes    & yes     & yes \\
boozer (bc)        & in     &        &        &         & yes$^2$ \\
netcdf (nc)$^4$    &        &        &        &         & no \\
hdf5 (h5)          & in/out & yes    & yes$^3$&         & no$^1$ \\
fortran namelist$^5$&in/out &        &        &         & yes$^2$ \\
efit               & in     &        &        &         & yes$^2$
    \end{tabular}
    \caption{Possibilities to read/write/edit the different in-/output
file formats of \neo2.
$^1$ the program \program{hdf5view} can be used to read/edit hdf5 files.
$^2$ This requires some care, e.g. about what changes are possible, what
side effects might occour.
$^3$ At the moment of writing this, octave is not capable of reading
just parts of hdf5 files, thus it can not be recommended for files
larger than the main memory.
$^4$ The netcdf format is currently not in use in \neo2, but as it has
been used at some point, it is listed here.
$^5$ Meant is here specifically the \neo2 configuration file.}
    \label{tablereadinginoutput}
  \end{center}
\end{table}

Data files are asssumed to be text files with only numbers arranged in
rows and columns. Each row and column has the same number of entries,
there are no special lines.
They are easy to read and edit in almost any program.

Boozer files are text files, which contain magnetic fiels data in a
specific format. There are header information and multiple blocks, where
each block also has a header.
They can be read with a texteditor. The data can in principle be edited,
but changes in size are non-trivial.

Hdf5 is binary format, which allows to store data in a directory like
structure. Additionally the entries can have comments, e.g. indicating
type, unit of measurement or details of computation.
Hdf5 files can be read and written by matlab and octave. Python probably
has a module for this. There exists also the tool \program{hdfview},
delivered with the hdf5 library, which allows to read and edit this
filetype.
Note that some output files may contain size information in some of the
fields, which makes resizing a bit more complicated.

Netcdf is a binary container format and as such similar to hdf5. At the
moment it is not used by \neo2, neither as input nor as output, but as
it has been used as an output format in the past, it is listed here.

Fortran namelists are mainly used as inputs, but in some cases there are
also output. As textfiles they can in principle, be edited with a
texteditior, but care must be taken with dependencies among the input
parameters.

Efit files contain magnetic field information (like boozer files) in
real space (unlike boozer files) in a specific format (which differs
from the format used by boozer files). These files can be viewed with
a texteditor, but as the file makes not clear which number is which
parameter, it is not recommended to edit efit files with a texteditor.

%~ \begin{figure}[thb]
%~ \begin{center}
%~ \includegraphics[width=12 truecm,clip]{heatflux.eps}
%~ \caption{GKW results of the electron heat flux expressed as a heat conduction coefficient (normalised
%~ to $\rho_e^2  c_e / L_T$ with $c_e = \sqrt{T_e/m_e}$) as a function of normalised time ($t_{NN} = tc_e/L_T$)
%~ for the Nevins ETG benchmark}
%~ \label{cyclone-nl}
%~ \end{center}
%~ \end{figure}
